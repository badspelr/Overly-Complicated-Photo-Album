{% extends 'album/base.html' %}
{% load static %}

{% block title %}User Manual - Complete Guide{% endblock %}

{% block extra_head %}
<style>
/* User Manual Styles */
.manual-wrapper {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    background: var(--bg-default);
}

.manual-header {
    text-align: center;
    padding: 3rem 0;
    background: linear-gradient(135deg, var(--primary-main) 0%, #5a9fd4 100%);
    border-radius: 12px;
    margin-bottom: 3rem;
    color: #fff;
}

.manual-header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
}

.manual-header p {
    font-size: 1.125rem;
    opacity: 0.95;
    margin: 0;
}

.manual-nav {
    background: var(--bg-paper);
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    border: 1px solid var(--divider);
    position: sticky;
    top: 80px;
    z-index: 100;
}

.manual-nav h3 {
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: 600;
    margin: 0 0 1rem 0;
}

.manual-nav-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 0.5rem;
}

.manual-nav a {
    color: var(--text-secondary);
    text-decoration: none;
    padding: 0.5rem 0.75rem;
    border-radius: 4px;
    display: block;
    transition: all 0.2s ease;
    font-size: 0.875rem;
}

.manual-nav a:hover {
    background: rgba(144, 202, 249, 0.1);
    color: var(--primary-main);
}

.manual-content {
    background: var(--bg-paper);
    border-radius: 8px;
    padding: 3rem;
    border: 1px solid var(--divider);
    line-height: 1.7;
}

.manual-section {
    margin-bottom: 4rem;
    scroll-margin-top: 100px;
}

.manual-section:last-child {
    margin-bottom: 0;
}

.manual-section h2 {
    color: var(--primary-main);
    font-size: 2rem;
    font-weight: 600;
    margin: 0 0 0.5rem 0;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--divider);
}

.manual-section h3 {
    color: var(--text-primary);
    font-size: 1.5rem;
    font-weight: 500;
    margin: 2rem 0 1rem 0;
}

.manual-section h4 {
    color: var(--text-primary);
    font-size: 1.125rem;
    font-weight: 500;
    margin: 1.5rem 0 0.75rem 0;
}

.manual-section p {
    color: var(--text-secondary);
    margin: 0 0 1rem 0;
}

.manual-section ul, .manual-section ol {
    color: var(--text-secondary);
    margin: 0 0 1rem 0;
    padding-left: 2rem;
}

.manual-section li {
    margin-bottom: 0.5rem;
}

.manual-section strong {
    color: var(--text-primary);
    font-weight: 600;
}

.feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin: 1.5rem 0;
}

.feature-card {
    background: rgba(144, 202, 249, 0.05);
    border: 1px solid rgba(144, 202, 249, 0.2);
    border-radius: 8px;
    padding: 1.5rem;
}

.feature-card h4 {
    color: var(--primary-main);
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0 0 0.75rem 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.feature-card p {
    font-size: 0.938rem;
    margin: 0;
}

.info-box {
    background: rgba(144, 202, 249, 0.08);
    border-left: 4px solid var(--primary-main);
    padding: 1rem 1.5rem;
    margin: 1.5rem 0;
    border-radius: 4px;
}

.info-box strong {
    color: var(--primary-main);
}

.warning-box {
    background: rgba(255, 152, 0, 0.08);
    border-left: 4px solid #ff9800;
    padding: 1rem 1.5rem;
    margin: 1.5rem 0;
    border-radius: 4px;
}

.warning-box strong {
    color: #ff9800;
}

.kbd {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    font-size: 0.813rem;
    font-family: monospace;
    background: var(--bg-default);
    border: 1px solid var(--divider);
    border-radius: 4px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.steps-list {
    counter-reset: step-counter;
    list-style: none;
    padding-left: 0;
}

.steps-list li {
    counter-increment: step-counter;
    position: relative;
    padding-left: 3rem;
    margin-bottom: 1.5rem;
}

.steps-list li::before {
    content: counter(step-counter);
    position: absolute;
    left: 0;
    top: 0;
    width: 2rem;
    height: 2rem;
    background: var(--primary-main);
    color: #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.875rem;
}

.screenshot-placeholder {
    background: rgba(144, 202, 249, 0.05);
    border: 2px dashed rgba(144, 202, 249, 0.3);
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
    color: var(--text-secondary);
    margin: 1rem 0;
}

@media (max-width: 768px) {
    .manual-wrapper {
        padding: 1rem;
    }
    
    .manual-header {
        padding: 2rem 1rem;
    }
    
    .manual-header h1 {
        font-size: 1.75rem;
    }
    
    .manual-content {
        padding: 1.5rem;
    }
    
    .manual-nav {
        position: relative;
        top: 0;
    }
    
    .manual-nav-grid {
        grid-template-columns: 1fr;
    }
    
    .feature-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="manual-wrapper">
    <!-- Header -->
    <div class="manual-header">
        <h1><i class="fas fa-book"></i> Django Photo Album</h1>
        <p>Complete User Manual & Guide</p>
    </div>

    <!-- Quick Navigation -->
    <div class="manual-nav">
        <h3><i class="fas fa-compass"></i> Quick Navigation</h3>
        <div class="manual-nav-grid">
            <a href="#getting-started"><i class="fas fa-rocket"></i> Getting Started</a>
            <a href="#account"><i class="fas fa-user"></i> Account Management</a>
            <a href="#albums"><i class="fas fa-folder"></i> Albums</a>
            <a href="#photos"><i class="fas fa-camera"></i> Photos & Videos</a>
            <a href="#categories"><i class="fas fa-tags"></i> Categories & Tags</a>
            <a href="#search"><i class="fas fa-search"></i> Search & Discovery</a>
            <a href="#ai-features"><i class="fas fa-robot"></i> AI Features</a>
            <a href="#sharing"><i class="fas fa-share-alt"></i> Sharing</a>
            <a href="#custom-albums"><i class="fas fa-layer-group"></i> Custom Albums</a>
            <a href="#favorites"><i class="fas fa-heart"></i> Favorites</a>
            <a href="#bulk-actions"><i class="fas fa-tasks"></i> Bulk Actions</a>
            <a href="#keyboard"><i class="fas fa-keyboard"></i> Keyboard Shortcuts</a>
            <a href="#admin"><i class="fas fa-shield-alt"></i> Admin Features</a>
            <a href="#mobile"><i class="fas fa-mobile-alt"></i> Mobile Features</a>
            <a href="#troubleshooting"><i class="fas fa-question-circle"></i> Troubleshooting</a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="manual-content">
        <!-- Getting Started -->
        <section id="getting-started" class="manual-section">
            <h2><i class="fas fa-rocket"></i> Getting Started</h2>
            
            <h3>Welcome to Django Photo Album!</h3>
            <p>Django Photo Album is a powerful, AI-enhanced photo and video management system that helps you organize, search, and share your media collection with ease.</p>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4><i class="fas fa-robot"></i> AI-Powered</h4>
                    <p>Automatic image captioning, tagging, and semantic search using advanced AI models.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-lock"></i> Secure</h4>
                    <p>Private albums, share links, and granular access control.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-mobile-alt"></i> Mobile-Friendly</h4>
                    <p>Responsive design works perfectly on phones and tablets.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-layer-group"></i> Flexible</h4>
                    <p>Regular albums and custom virtual collections for advanced organization.</p>
                </div>
            </div>

            <h3>First Time Login</h3>
            <ol class="steps-list">
                <li>Navigate to your Photo Album instance (e.g., <code>http://localhost:8000</code>)</li>
                <li>Click <strong>Register</strong> to create a new account or <strong>Login</strong> if you already have one</li>
                <li>Fill in your username, email, and password</li>
                <li>Click <strong>Sign Up</strong> and you'll be redirected to your dashboard</li>
            </ol>

            <h3>Dashboard Overview</h3>
            <p>Your dashboard is your home base, showing:</p>
            <ul>
                <li><strong>Your Albums</strong>: Grid view of all your albums with thumbnail previews</li>
                <li><strong>Quick Stats</strong>: Total photos, videos, and albums</li>
                <li><strong>Recent Uploads</strong>: Your most recently added media</li>
                <li><strong>Quick Actions</strong>: Create album, upload photos, manage categories</li>
            </ul>
        </section>

        <!-- Account Management -->
        <section id="account" class="manual-section">
            <h2><i class="fas fa-user"></i> Account Management</h2>
            
            <h3>Profile Settings</h3>
            <p>Access your profile by clicking your username in the top navigation bar, then select <strong>Profile</strong>.</p>
            
            <h4>Update Your Information</h4>
            <ul>
                <li><strong>Username</strong>: Your unique identifier (cannot be changed)</li>
                <li><strong>Email</strong>: Update your email address</li>
                <li><strong>First Name / Last Name</strong>: Optional personal information</li>
            </ul>

            <h4>Change Password</h4>
            <ol class="steps-list">
                <li>Click your username → <strong>Change Password</strong></li>
                <li>Enter your current password</li>
                <li>Enter your new password twice to confirm</li>
                <li>Click <strong>Update Password</strong></li>
            </ol>

            <h3>Delete Account</h3>
            <div class="warning-box">
                <strong><i class="fas fa-exclamation-triangle"></i> Warning:</strong> Account deletion is permanent and cannot be undone. All your albums, photos, videos, and data will be permanently deleted.
            </div>
            <ol class="steps-list">
                <li>Go to your <strong>Profile</strong> page</li>
                <li>Scroll to the <strong>Danger Zone</strong> section</li>
                <li>Click <strong>Delete My Account</strong></li>
                <li>Review what will be deleted (albums, photos, videos, tags, favorites)</li>
                <li>Check the confirmation box</li>
                <li>Click <strong>Delete My Account</strong> and confirm</li>
            </ol>
        </section>

        <!-- Albums -->
        <section id="albums" class="manual-section">
            <h2><i class="fas fa-folder"></i> Creating and Managing Albums</h2>
            
            <h3>What is an Album?</h3>
            <p>An album is a collection of photos and videos. Think of it like a physical photo album - each photo belongs to one album. Albums can be public (visible to anyone) or private (only you and invited users can see them).</p>

            <h3>Creating a New Album</h3>
            <ol class="steps-list">
                <li>Click <strong>+ New Album</strong> from your dashboard or the Albums page</li>
                <li>Enter an album title (required)</li>
                <li>Add a description (optional but recommended)</li>
                <li>Choose visibility:
                    <ul>
                        <li><strong>Public</strong>: Anyone can view</li>
                        <li><strong>Private</strong>: Only you and invited viewers can access</li>
                    </ul>
                </li>
                <li>Click <strong>Create Album</strong></li>
            </ol>

            <h3>Album Settings</h3>
            <p>Click the <strong>⋮</strong> menu on any album to access these options:</p>
            <ul>
                <li><strong>Edit Album</strong>: Change title, description, or visibility</li>
                <li><strong>Manage Viewers</strong>: Add/remove users who can view private albums</li>
                <li><strong>Create Share Link</strong>: Generate a public link for sharing</li>
                <li><strong>Download Album</strong>: Download all photos/videos as a ZIP file</li>
                <li><strong>Delete Album</strong>: Permanently remove album and all contents</li>
            </ul>

            <div class="info-box">
                <strong><i class="fas fa-info-circle"></i> Tip:</strong> You can organize albums using categories to keep related albums together (e.g., "Vacations", "Family", "Work").
            </div>
        </section>

        <!-- Photos & Videos -->
        <section id="photos" class="manual-section">
            <h2><i class="fas fa-camera"></i> Photos & Videos</h2>
            
            <h3>Uploading Media</h3>
            
            <h4>Method 1: Drag and Drop</h4>
            <ol class="steps-list">
                <li>Open an album</li>
                <li>Drag photos/videos from your computer directly onto the album page</li>
                <li>Watch the upload progress bar</li>
                <li>AI processing begins automatically after upload</li>
            </ol>

            <h4>Method 2: Upload Button</h4>
            <ol class="steps-list">
                <li>Open an album</li>
                <li>Click <strong>+ Upload Photos</strong></li>
                <li>Select multiple files using Ctrl/Cmd + Click</li>
                <li>Click <strong>Open</strong> to start uploading</li>
            </ol>

            <h4>Supported Formats</h4>
            <ul>
                <li><strong>Photos</strong>: JPEG, JPG, PNG, GIF, WebP, HEIC</li>
                <li><strong>Videos</strong>: MP4, MOV, AVI, MKV, WebM</li>
            </ul>

            <h3>Editing Photo/Video Metadata</h3>
            <ol class="steps-list">
                <li>Click on a photo or video to open detail view</li>
                <li>Click <strong>Edit Metadata</strong></li>
                <li>Update information:
                    <ul>
                        <li><strong>Title</strong>: Custom name for the media</li>
                        <li><strong>Description</strong>: Detailed description</li>
                        <li><strong>Tags</strong>: Comma-separated keywords (e.g., "sunset, beach, vacation")</li>
                        <li><strong>Categories</strong>: Assign to one or more categories</li>
                        <li><strong>Custom Albums</strong>: Add to virtual collections</li>
                        <li><strong>Date Taken/Recorded</strong>: Override the captured date</li>
                        <li><strong>Camera Info</strong>: Camera make and model</li>
                        <li><strong>Location</strong>: GPS coordinates (latitude/longitude)</li>
                    </ul>
                </li>
                <li>Click <strong>Save Changes</strong></li>
            </ol>

            <h3>Photo Detail View Features</h3>
            <ul>
                <li><strong>High-Resolution Display</strong>: Click photo to view full size</li>
                <li><strong>Navigation</strong>: Use arrow buttons or keyboard (← →) to browse</li>
                <li><strong>Add to Favorites</strong>: Click the heart icon</li>
                <li><strong>Download</strong>: Download original file</li>
                <li><strong>AI Description</strong>: View automatically generated caption</li>
                <li><strong>Metadata Display</strong>: See EXIF data, dimensions, file size</li>
            </ul>

            <h3>Slideshow Mode</h3>
            <ol class="steps-list">
                <li>Open an album</li>
                <li>Click <strong>Start Slideshow</strong></li>
                <li>Use controls:
                    <ul>
                        <li><kbd>Space</kbd>: Play/Pause</li>
                        <li><kbd>←</kbd> / <kbd>→</kbd>: Navigate photos</li>
                        <li><kbd>F</kbd>: Toggle fullscreen</li>
                        <li><kbd>Esc</kbd>: Exit slideshow</li>
                        <li>Click speed button to change timing (2s, 3s, 5s, 10s)</li>
                    </ul>
                </li>
            </ol>
        </section>

        <!-- Categories & Tags -->
        <section id="categories" class="manual-section">
            <h2><i class="fas fa-tags"></i> Categories & Tags</h2>
            
            <h3>Categories</h3>
            <p>Categories help you organize albums and media into groups. Examples: "Vacations", "Family", "Work", "Pets".</p>

            <h4>Creating Categories</h4>
            <ol class="steps-list">
                <li>Click <strong>Manage Categories</strong> from the navigation menu</li>
                <li>Click <strong>+ New Category</strong></li>
                <li>Enter a category name and optional description</li>
                <li>Click <strong>Create Category</strong></li>
            </ol>

            <h4>Assigning Categories</h4>
            <ul>
                <li><strong>To Albums</strong>: Edit album settings and select a category</li>
                <li><strong>To Photos/Videos</strong>: Edit metadata and check one or more categories</li>
            </ul>

            <h3>Tags</h3>
            <p>Tags are keywords that describe media content. They make searching much easier and more precise.</p>

            <h4>Adding Tags</h4>
            <ul>
                <li><strong>Manual</strong>: Edit photo/video and enter comma-separated tags</li>
                <li><strong>Automatic</strong>: AI generates tags based on photo content</li>
                <li><strong>Bulk</strong>: Select multiple photos and add tags to all at once</li>
            </ul>

            <div class="info-box">
                <strong><i class="fas fa-lightbulb"></i> Best Practice:</strong> Use specific, descriptive tags like "sunset beach california 2024" instead of generic ones like "photo".
            </div>
        </section>

        <!-- Search & Discovery -->
        <section id="search" class="manual-section">
            <h2><i class="fas fa-search"></i> Search & Discovery</h2>
            
            <h3>Global Search</h3>
            <p>Search across all your albums from anywhere in the application.</p>

            <h4>How to Search</h4>
            <ol class="steps-list">
                <li>Click the search icon or press <kbd>/</kbd></li>
                <li>Enter your search query</li>
                <li>Results show photos, videos, and albums that match</li>
            </ol>

            <h4>What You Can Search</h4>
            <ul>
                <li><strong>Album names and descriptions</strong></li>
                <li><strong>Photo/video titles and descriptions</strong></li>
                <li><strong>Tags</strong> (both manual and AI-generated)</li>
                <li><strong>AI descriptions</strong> (automatically generated captions)</li>
                <li><strong>Categories</strong></li>
                <li><strong>Metadata</strong> (camera model, location, etc.)</li>
            </ul>

            <h3>Album Search & Filters</h3>
            <p>Within an album, you can filter and search for specific media.</p>

            <h4>Available Filters</h4>
            <ul>
                <li><strong>Category</strong>: Filter by assigned categories</li>
                <li><strong>Tags</strong>: Filter by specific tags</li>
                <li><strong>Date Range</strong>: Filter by date taken or uploaded</li>
                <li><strong>Media Type</strong>: Photos only, Videos only, or Both</li>
            </ul>

            <h4>Sorting Options</h4>
            <ul>
                <li><strong>Date Taken</strong>: Newest or Oldest first</li>
                <li><strong>Date Added</strong>: Recently uploaded or oldest uploads</li>
                <li><strong>Title</strong>: Alphabetically A-Z or Z-A</li>
            </ul>

            <h3>Advanced Search Tips</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4><i class="fas fa-quote-left"></i> Exact Phrases</h4>
                    <p>Use quotes for exact matches: <code>"golden gate bridge"</code></p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-layer-group"></i> Multiple Terms</h4>
                    <p>Search finds media matching any term: <code>beach sunset ocean</code></p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-robot"></i> Semantic Search</h4>
                    <p>AI understands meaning: <code>people smiling</code> finds happy photos</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-hashtag"></i> Tag Search</h4>
                    <p>Prefix with # to search tags only: <code>#vacation</code></p>
                </div>
            </div>
        </section>

        <!-- AI Features -->
        <section id="ai-features" class="manual-section">
            <h2><i class="fas fa-robot"></i> AI Features</h2>
            
            <h3>Automatic Image Analysis</h3>
            <p>When you upload photos and videos, AI automatically:</p>
            <ul>
                <li><strong>Generates descriptions</strong>: Natural language captions describing what's in the image</li>
                <li><strong>Creates tags</strong>: Identifies objects, people, scenes, activities</li>
                <li><strong>Extracts features</strong>: Colors, composition, mood</li>
                <li><strong>Enables semantic search</strong>: Search by concept, not just keywords</li>
            </ul>

            <h3>AI Processing Settings (Admin Only)</h3>
            <p>Site administrators can configure AI processing behavior:</p>
            
            <h4>Auto-Process on Upload</h4>
            <p>When enabled, photos and videos are processed immediately after upload. When disabled, media must be processed manually.</p>

            <h4>Scheduled Processing</h4>
            <p>Configure daily batch processing at a specific time (e.g., 2:00 AM) to process any unprocessed media.</p>

            <h4>Performance Settings</h4>
            <ul>
                <li><strong>Batch Size</strong>: How many items to process at once (default: 500)</li>
                <li><strong>Timeout</strong>: Maximum seconds per item (default: 30)</li>
            </ul>

            <h3>Manual AI Processing (Admin/Owner)</h3>
            <ol class="steps-list">
                <li>Navigate to <strong>Process Photos AI</strong> or <strong>Process Videos AI</strong></li>
                <li>View statistics (Total, Processed, Pending)</li>
                <li>Optionally select specific album to process</li>
                <li>Set a limit (useful for testing)</li>
                <li>Check "Force reprocess" to regenerate existing descriptions</li>
                <li>Click <strong>Start AI Processing</strong></li>
            </ol>

            <div class="info-box">
                <strong><i class="fas fa-microchip"></i> Technology:</strong> Uses BLIP (Bootstrapping Language-Image Pre-training) AI model with GPU acceleration when available.
            </div>
        </section>

        <!-- Sharing -->
        <section id="sharing" class="manual-section">
            <h2><i class="fas fa-share-alt"></i> Sharing & Collaboration</h2>
            
            <h3>Album Viewers</h3>
            <p>Add specific users to view your private albums.</p>

            <h4>Inviting Users</h4>
            <ol class="steps-list">
                <li>Click <strong>Invite User</strong> from the navigation menu</li>
                <li>Enter user's email address</li>
                <li>Select which albums to share</li>
                <li>If user doesn't exist, enter username and password to create account</li>
                <li>Click <strong>Invite</strong></li>
            </ol>

            <h4>Managing Album Viewers</h4>
            <ol class="steps-list">
                <li>Open the album</li>
                <li>Click <strong>⋮</strong> → <strong>Manage Viewers</strong></li>
                <li>See list of users with access</li>
                <li>Click <strong>Remove</strong> to revoke access</li>
            </ol>

            <h3>Share Links</h3>
            <p>Create public URLs for private albums - perfect for sharing with people who don't have accounts.</p>

            <h4>Creating Share Links</h4>
            <ol class="steps-list">
                <li>Open the album</li>
                <li>Click <strong>⋮</strong> → <strong>Create Share Link</strong></li>
                <li>Optionally set expiration date</li>
                <li>Click <strong>Create Link</strong></li>
                <li>Copy the generated URL and share it</li>
            </ol>

            <h4>Managing Share Links</h4>
            <ol class="steps-list">
                <li>Click <strong>⋮</strong> → <strong>Manage Share Links</strong></li>
                <li>View all active share links for the album</li>
                <li>See access count and expiration dates</li>
                <li>Click <strong>Delete</strong> to disable a link</li>
            </ol>

            <div class="warning-box">
                <strong><i class="fas fa-exclamation-triangle"></i> Security:</strong> Anyone with a share link can view the album. Delete links when no longer needed.
            </div>
        </section>

        <!-- Custom Albums -->
        <section id="custom-albums" class="manual-section">
            <h2><i class="fas fa-layer-group"></i> Custom Albums (Virtual Collections)</h2>
            
            <h3>What are Custom Albums?</h3>
            <p>Custom Albums are like playlists for your photos - they let you create virtual collections from media across different regular albums.</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4><i class="fas fa-folder"></i> Regular Albums</h4>
                    <p>Like physical photo albums - each photo belongs to one album. Deleting an album deletes its photos.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-layer-group"></i> Custom Albums</h4>
                    <p>Virtual collections - photos can appear in multiple custom albums. Deleting doesn't affect originals.</p>
                </div>
            </div>

            <h3>Creating and Using Custom Albums</h3>
            <ol class="steps-list">
                <li>Click <strong>+ New Album</strong> from your dashboard</li>
                <li>Check <strong>This is a custom album</strong></li>
                <li>Enter title and description</li>
                <li>Click <strong>Create Album</strong></li>
                <li>To add photos:
                    <ul>
                        <li>Edit any photo from any regular album</li>
                        <li>Select custom albums from the dropdown</li>
                        <li>Save - photo now appears in those custom albums</li>
                    </ul>
                </li>
            </ol>

            <h3>Example Use Cases</h3>
            <ul>
                <li><strong>"Best of 2024"</strong>: Collect favorite photos from multiple albums</li>
                <li><strong>"Family Memories"</strong>: Gather family photos from vacations, holidays, birthdays</li>
                <li><strong>"Portfolio"</strong>: Showcase your best work from various shoots</li>
                <li><strong>"Nature Photography"</strong>: Build a collection of nature shots from different trips</li>
                <li><strong>"Year in Review"</strong>: Curate highlights from the entire year</li>
            </ul>

            <div class="info-box">
                <strong><i class="fas fa-info-circle"></i> Remember:</strong> Photos stay in their original albums. Removing from a custom album doesn't delete the original photo.
            </div>
        </section>

        <!-- Favorites -->
        <section id="favorites" class="manual-section">
            <h2><i class="fas fa-heart"></i> Favorites</h2>
            
            <h3>What are Favorites?</h3>
            <p>Mark your best or most important photos and videos as favorites for quick access.</p>

            <h3>Adding to Favorites</h3>
            <ul>
                <li><strong>Method 1</strong>: Click the heart icon on photo/video thumbnails</li>
                <li><strong>Method 2</strong>: In detail view, click the favorite button</li>
                <li><strong>Method 3</strong>: Press <kbd>F</kbd> in photo detail view</li>
            </ul>

            <h3>Viewing Favorites</h3>
            <ol class="steps-list">
                <li>Click <strong>Favorites</strong> in the navigation menu (or press <kbd>Alt</kbd>+<kbd>F</kbd>)</li>
                <li>See all your favorite media in one place</li>
                <li>Filter and sort just like regular albums</li>
            </ol>
        </section>

        <!-- Bulk Actions -->
        <section id="bulk-actions" class="manual-section">
            <h2><i class="fas fa-tasks"></i> Bulk Actions</h2>
            
            <h3>Selecting Multiple Items</h3>
            <ul>
                <li><strong>Click checkboxes</strong> on individual photos/videos</li>
                <li><strong>Select All</strong>: Click select all button or press <kbd>Ctrl</kbd>+<kbd>A</kbd></li>
                <li><strong>Deselect</strong>: Click selected items again or press <kbd>Ctrl</kbd>+<kbd>A</kbd></li>
            </ul>

            <h3>Available Bulk Actions</h3>
            <p>When photos/videos are selected, a sticky action bar appears at the bottom of the screen with these options:</p>

            <h4><i class="fas fa-download"></i> Bulk Download</h4>
            <ul>
                <li>Downloads all selected media as a ZIP file</li>
                <li>Preserves original filenames and quality</li>
                <li>Perfect for backups or sharing with others</li>
            </ul>

            <h4><i class="fas fa-trash"></i> Bulk Delete</h4>
            <ul>
                <li>Permanently deletes all selected media</li>
                <li>Requires confirmation</li>
                <li>Cannot be undone</li>
            </ul>

            <h4><i class="fas fa-tags"></i> Add Categories</h4>
            <ul>
                <li>Assign categories to all selected items at once</li>
                <li>Select from dropdown</li>
                <li>Existing categories are preserved</li>
            </ul>

            <h4><i class="fas fa-hashtag"></i> Add Tags</h4>
            <ul>
                <li>Add tags to all selected items</li>
                <li>Enter comma-separated tags</li>
                <li>Existing tags are preserved</li>
            </ul>

            <div class="info-box">
                <strong><i class="fas fa-mobile-alt"></i> Mobile:</strong> On mobile devices, the bulk action bar stacks vertically for easier access.
            </div>
        </section>

        <!-- Keyboard Shortcuts -->
        <section id="keyboard" class="manual-section">
            <h2><i class="fas fa-keyboard"></i> Keyboard Shortcuts</h2>
            
            <h3>Global Navigation</h3>
            <p>These shortcuts work on any page:</p>
            <ul>
                <li><kbd class="kbd">Alt</kbd> + <kbd class="kbd">D</kbd> : Go to Dashboard</li>
                <li><kbd class="kbd">Alt</kbd> + <kbd class="kbd">A</kbd> : Go to My Albums</li>
                <li><kbd class="kbd">Alt</kbd> + <kbd class="kbd">U</kbd> : Go to Upload</li>
                <li><kbd class="kbd">Alt</kbd> + <kbd class="kbd">S</kbd> : Go to Search</li>
                <li><kbd class="kbd">Alt</kbd> + <kbd class="kbd">F</kbd> : Go to Favorites</li>
                <li><kbd class="kbd">/</kbd> : Focus search bar</li>
            </ul>

            <h3>Album Page</h3>
            <ul>
                <li><kbd class="kbd">Ctrl</kbd> + <kbd class="kbd">A</kbd> : Select/Deselect all photos</li>
                <li><kbd class="kbd">Delete</kbd> : Delete selected photos (with confirmation)</li>
            </ul>

            <h3>Photo/Video Detail View</h3>
            <ul>
                <li><kbd class="kbd">←</kbd> : Previous photo/video</li>
                <li><kbd class="kbd">→</kbd> : Next photo/video</li>
                <li><kbd class="kbd">F</kbd> : Toggle favorite</li>
                <li><kbd class="kbd">Esc</kbd> : Close detail view</li>
            </ul>

            <h3>Slideshow Mode</h3>
            <ul>
                <li><kbd class="kbd">Space</kbd> : Play/Pause</li>
                <li><kbd class="kbd">←</kbd> / <kbd class="kbd">→</kbd> : Navigate photos</li>
                <li><kbd class="kbd">F</kbd> : Toggle fullscreen</li>
                <li><kbd class="kbd">Esc</kbd> : Exit slideshow</li>
            </ul>
        </section>

        <!-- Admin Features -->
        <section id="admin" class="manual-section">
            <h2><i class="fas fa-shield-alt"></i> Admin Features</h2>
            
            <h3>User Roles</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4><i class="fas fa-user"></i> Viewer</h4>
                    <p>Can view shared albums and media. Cannot upload or manage content.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-user-tie"></i> Album Owner</h4>
                    <p>Can create albums, upload media, invite users, and manage their own content.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-user-shield"></i> Site Admin</h4>
                    <p>Full access to all features, user management, and AI settings.</p>
                </div>
            </div>

            <h3>Managing Users (Admin Only)</h3>
            <ol class="steps-list">
                <li>Click <strong>Manage Users</strong> from the navigation menu</li>
                <li>View all users and their roles</li>
                <li>Click <strong>Edit</strong> to modify user information or permissions</li>
                <li>Click <strong>Delete</strong> to remove a user (requires confirmation)</li>
            </ol>

            <h3>AI Processing Settings (Admin Only)</h3>
            <ol class="steps-list">
                <li>Click <strong>AI Settings</strong> from the admin menu</li>
                <li>Configure:
                    <ul>
                        <li>Auto-process on upload (On/Off)</li>
                        <li>Scheduled processing (Enable/Disable)</li>
                        <li>Schedule time (Hour and Minute)</li>
                        <li>Batch size (items per run)</li>
                        <li>Processing timeout (seconds)</li>
                    </ul>
                </li>
                <li>Click <strong>Save Settings</strong></li>
            </ol>

            <h3>Django Admin Panel</h3>
            <p>Site admins have access to the Django admin panel for advanced management:</p>
            <ul>
                <li>Direct database access to all models</li>
                <li>User management and permissions</li>
                <li>System logs and monitoring</li>
                <li>Advanced configuration options</li>
            </ul>
            <p>Access at: <code>/admin/</code></p>
        </section>

        <!-- Mobile Features -->
        <section id="mobile" class="manual-section">
            <h2><i class="fas fa-mobile-alt"></i> Mobile Features</h2>
            
            <h3>Mobile-Optimized Interface</h3>
            <p>The entire application is fully responsive and works perfectly on phones and tablets.</p>

            <h4>Mobile-Specific Features</h4>
            <ul>
                <li><strong>Touch-Optimized</strong>: All buttons and controls sized for easy tapping</li>
                <li><strong>Swipe Navigation</strong>: Swipe between photos in detail view</li>
                <li><strong>Responsive Grid</strong>: Photo grid adjusts to screen size</li>
                <li><strong>Mobile Upload</strong>: Upload directly from camera or gallery</li>
                <li><strong>Optimized Images</strong>: Automatically loads appropriate image sizes</li>
            </ul>

            <h3>Mobile Download Page</h3>
            <p>A simplified download interface optimized for mobile browsers:</p>
            <ol class="steps-list">
                <li>Navigate to <code>/mobile_download/</code></li>
                <li>See list of albums with download buttons</li>
                <li>Click to download albums as ZIP files</li>
                <li>Download individual photos/videos</li>
            </ol>

            <h3>Offline Support</h3>
            <p>When internet connection is lost, you'll see an offline page with:</p>
            <ul>
                <li>Information about the disconnection</li>
                <li>Refresh button to retry</li>
                <li>Cached content (if previously viewed)</li>
            </ul>
        </section>

        <!-- Troubleshooting -->
        <section id="troubleshooting" class="manual-section">
            <h2><i class="fas fa-question-circle"></i> Troubleshooting</h2>
            
            <h3>Common Issues</h3>

            <h4>Upload Fails</h4>
            <ul>
                <li><strong>Check file format</strong>: Ensure files are supported types</li>
                <li><strong>File size</strong>: Very large files (>100MB) may timeout</li>
                <li><strong>Internet connection</strong>: Verify stable connection</li>
                <li><strong>Browser</strong>: Try a different browser or clear cache</li>
            </ul>

            <h4>Photos Not Showing</h4>
            <ul>
                <li><strong>Refresh page</strong>: Press F5 or Ctrl+R</li>
                <li><strong>Clear browser cache</strong>: Ctrl+Shift+Delete</li>
                <li><strong>Check permissions</strong>: Ensure you have access to the album</li>
                <li><strong>Check file exists</strong>: File may have been deleted</li>
            </ul>

            <h4>Search Not Working</h4>
            <ul>
                <li><strong>AI processing</strong>: Ensure photos have been processed with AI</li>
                <li><strong>Spelling</strong>: Check search term spelling</li>
                <li><strong>Try different terms</strong>: Use synonyms or related words</li>
                <li><strong>Check filters</strong>: Remove active filters that may exclude results</li>
            </ul>

            <h4>Slow Performance</h4>
            <ul>
                <li><strong>Large albums</strong>: Albums with 1000+ photos may load slowly</li>
                <li><strong>Clear browser cache</strong>: Old cached data can slow things down</li>
                <li><strong>Disable extensions</strong>: Browser extensions can interfere</li>
                <li><strong>Try incognito mode</strong>: Rule out extension/cache issues</li>
            </ul>

            <h3>Getting Help</h3>
            <p>If you're still having issues:</p>
            <ol class="steps-list">
                <li>Check the <a href="{% url 'album:about' %}">About page</a> for system information</li>
                <li>Visit the <a href="{% url 'album:contact' %}">Contact page</a> to send a message to site admins</li>
                <li>Include details: what you were doing, error messages, browser used</li>
                <li>Attach screenshots if helpful</li>
            </ol>

            <div class="info-box">
                <strong><i class="fas fa-life-ring"></i> Support:</strong> For technical support, contact your system administrator or use the contact form.
            </div>
        </section>

        <!-- Footer -->
        <div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--divider); text-align: center; color: var(--text-secondary);">
            <p>Django Photo Album User Manual</p>
            <p style="font-size: 0.875rem;">Last Updated: October 2025</p>
            <p style="margin-top: 1rem;">
                <a href="{% url 'album:about' %}" style="color: var(--primary-main); text-decoration: none; margin: 0 1rem;">About</a>
                <a href="{% url 'album:contact' %}" style="color: var(--primary-main); text-decoration: none; margin: 0 1rem;">Contact</a>
                <a href="{% url 'album:homepage' %}" style="color: var(--primary-main); text-decoration: none; margin: 0 1rem;">Home</a>
            </p>
        </div>
    </div>
</div>
{% endblock %}
